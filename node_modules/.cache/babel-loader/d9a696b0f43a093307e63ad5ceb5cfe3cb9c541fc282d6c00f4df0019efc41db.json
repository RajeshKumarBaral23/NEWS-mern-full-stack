{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import Login from'./Login';import Register from'./Register';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[articles,setArticles]=useState([]);const[token,setToken]=useState(localStorage.getItem('token')||'');useEffect(()=>{if(token){fetch('http://localhost:3000/articles',{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>response.json()).then(data=>{setArticles(data);}).catch(error=>console.error('Error fetching articles:',error));}},[token]);const handleLogout=()=>{setToken('');localStorage.removeItem('token');};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"news-site-title\",children:\"CBN News\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"nav-link\",children:\"Home\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/world\",className:\"nav-link\",children:\"World\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/politics\",className:\"nav-link\",children:\"Politics\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/business\",className:\"nav-link\",children:\"Business\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/technology\",className:\"nav-link\",children:\"Technology\"})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:!token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Login,{setToken:token=>{setToken(token);localStorage.setItem('token',token);}}),/*#__PURE__*/_jsx(Register,{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"news-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Latest Articles\"}),articles.length>0?articles.map(article=>/*#__PURE__*/_jsxs(\"div\",{className:\"news-article\",children:[/*#__PURE__*/_jsx(\"h3\",{children:article.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"news-summary\",children:[article.content.slice(0,150),\"...\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"news-author\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",article.author]}),/*#__PURE__*/_jsxs(\"p\",{className:\"news-date\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Published:\"}),\" \",new Date(article.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"a\",{href:\"/article/\".concat(article._id),className:\"read-more\",children:\"Read more\"})]},article._id)):/*#__PURE__*/_jsx(\"p\",{children:\"Loading articles...\"})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"App-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 CBN News. All rights reserved.\"})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Login","Register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","articles","setArticles","token","setToken","localStorage","getItem","fetch","headers","Authorization","concat","then","response","json","data","catch","error","console","handleLogout","removeItem","className","children","href","setItem","onClick","length","map","article","title","content","slice","author","Date","createdAt","toLocaleDateString","_id"],"sources":["C:/FarmRipe/NEWS-mern-full-stack/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './App.css';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\n\r\nfunction App() {\r\n  const [articles, setArticles] = useState([]);\r\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      fetch('http://localhost:3000/articles', {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setArticles(data);\r\n        })\r\n        .catch((error) => console.error('Error fetching articles:', error));\r\n    }\r\n  }, [token]);\r\n\r\n  const handleLogout = () => {\r\n    setToken('');\r\n    localStorage.removeItem('token');\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1 className=\"news-site-title\">CBN News</h1>\r\n        <nav className=\"navbar\">\r\n          <a href=\"/\" className=\"nav-link\">Home</a>\r\n          <a href=\"/world\" className=\"nav-link\">World</a>\r\n          <a href=\"/politics\" className=\"nav-link\">Politics</a>\r\n          <a href=\"/business\" className=\"nav-link\">Business</a>\r\n          <a href=\"/technology\" className=\"nav-link\">Technology</a>\r\n        </nav>\r\n      </header>\r\n\r\n      <main className=\"main-content\">\r\n        {!token ? (\r\n          <>\r\n            <Login setToken={(token) => {\r\n              setToken(token);\r\n              localStorage.setItem('token', token);\r\n            }} />\r\n            <Register />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <button onClick={handleLogout}>Logout</button>\r\n            <section className=\"news-section\">\r\n              <h2>Latest Articles</h2>\r\n              {articles.length > 0 ? (\r\n                articles.map((article) => (\r\n                  <div key={article._id} className=\"news-article\">\r\n                    <h3>{article.title}</h3>\r\n                    <p className=\"news-summary\">{article.content.slice(0, 150)}...</p>\r\n                    <p className=\"news-author\"><strong>Author:</strong> {article.author}</p>\r\n                    <p className=\"news-date\">\r\n                      <strong>Published:</strong> {new Date(article.createdAt).toLocaleDateString()}\r\n                    </p>\r\n                    <a href={`/article/${article._id}`} className=\"read-more\">Read more</a>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p>Loading articles...</p>\r\n              )}\r\n            </section>\r\n          </>\r\n        )}\r\n      </main>\r\n\r\n      <footer className=\"App-footer\">\r\n        <p>&copy; 2024 CBN News. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}